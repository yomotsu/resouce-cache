!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.resourceCacher={})}(this,function(e){"use strict";var l={};e.ONE_SECOND=1e3,e.ONE_MINUTE=6e4,e.ONE_HOUR=36e5,e.ONE_DAY=864e5,e.loadResource=function(u){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6e4;return new Promise(function(r){if(/^data:/.test(u))r(u);else{var n=Date.now()+c;if(l[u])return l[u].expires<n&&(clearTimeout(l[u].timeoutId),l[u].expires=n,l[u].timeoutId=setTimeout(function(){URL.revokeObjectURL(l[u].blobUrl),delete l[u]},c)),void r(l[u].blobUrl);var i=new XMLHttpRequest;i.open("GET",u,!0),i.responseType="arraybuffer",i.onload=function(){var e=new Blob([i.response]),t=URL.createObjectURL(e),o=setTimeout(function(){URL.revokeObjectURL(l[u].blobUrl),delete l[u]},c);l[u]={blobUrl:t,expires:n,timeoutId:o},r(t)},i.send()}})},e.clearCacher=function(e){if(e)return URL.revokeObjectURL(l[e].blobUrl),void delete l[e];Object.keys(l).forEach(function(e){URL.revokeObjectURL(l[e].blobUrl),delete l[e]})},Object.defineProperty(e,"__esModule",{value:!0})});
